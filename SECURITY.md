# Security Policy

## Reporting Security Issues

If you discover a security vulnerability in this project, please report it immediately to the project maintainers.

**DO NOT** create a public GitHub issue for security vulnerabilities.

## Handling Sensitive Information

### Environment Variables

**Never commit sensitive information to version control.** This includes:

- API keys (OpenAI, Anthropic, Replicate, ElevenLabs, etc.)
- AWS credentials (Access Key ID, Secret Access Key)
- Database connection strings with passwords
- Authentication tokens
- Private keys or certificates
- Any other secrets or credentials

### Best Practices

1. **Use .env files for local development**
   - Copy `.env.example` to `.env` 
   - Add your actual credentials to `.env`
   - `.env` is gitignored and will not be committed

2. **Use example files for documentation**
   - Keep `.env.example` files with placeholder values
   - Use `your_key_here` or similar placeholders
   - Never include actual credentials in example files

3. **Sanitize examples in documentation**
   - When documenting API responses with presigned URLs or tokens, sanitize them:
     - Replace AWS Access Keys: `AKIAXXXXXXXXXXXXXXXXX`
     - Replace signatures: `XXXXXXXXXXXXXXXXXXXX`
     - Replace other secrets with `***REDACTED***` or similar

4. **Use AWS Secrets Manager in production**
   - Production deployments use AWS Secrets Manager (see `terraform/secrets.tf`)
   - Secrets are injected at runtime, never hardcoded
   - IAM policies restrict access to authorized services only

5. **Rotate exposed credentials immediately**
   - If credentials are accidentally committed, rotate them immediately
   - Update all deployments with new credentials
   - Review git history to ensure complete removal

### Files That Should Never Be Committed

The following files are gitignored to prevent accidental commits:

- `.env` - Local environment variables
- `terraform/terraform.tfvars` - Terraform variables with actual values
- Any file containing actual API keys or passwords

### Verifying Before Commit

Before committing code, verify you haven't included sensitive data:

```bash
# Check staged changes
git diff --cached

# Search for potential secrets in staged files
git diff --cached | grep -i "api[_-]key\|secret\|password\|token"

# Use git-secrets or similar tools (recommended)
git secrets --scan
```

### Production Security

1. **AWS Secrets Manager** - All production secrets stored securely
2. **IAM Roles** - Services use IAM roles instead of access keys where possible
3. **Encryption** - Secrets encrypted at rest using AWS KMS
4. **Principle of Least Privilege** - Services have minimal required permissions
5. **Regular Rotation** - Credentials rotated on a regular schedule

## Security Checklist

When contributing to this project:

- [ ] No API keys or secrets in code
- [ ] `.env` file not committed
- [ ] Example files use placeholders only
- [ ] Documentation examples are sanitized
- [ ] Terraform variable files not committed
- [ ] Private keys or certificates not committed

## Known Security Considerations

### AWS Credentials Exposure (Resolved)

**Issue**: AWS Access Key ID was previously exposed in `.devdocs/v2/feats.md`  
**Resolution**: Sanitized in commit [current]  
**Action Taken**: Credentials have been rotated

### S3 Presigned URLs

S3 presigned URLs in API responses contain temporary credentials that expire after 1 hour (3600 seconds). These are:
- Time-limited (default 1 hour)
- Scoped to specific objects
- Automatically generated by the application
- Safe to expose to authorized users

## Security Tools

Consider using these tools to prevent accidental secret commits:

- [git-secrets](https://github.com/awslabs/git-secrets) - Prevents committing secrets
- [detect-secrets](https://github.com/Yelp/detect-secrets) - Detects secrets in code
- [trufflehog](https://github.com/trufflesecurity/trufflehog) - Scans git history for secrets

## Contact

For security concerns, contact the project maintainers privately.
